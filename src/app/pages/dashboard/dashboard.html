<section class="min-h-screen home-page p-6">
    <div class="mx-auto max-w-7xl space-y-6 dashboard-shell">
        <div class="neon-orb neon-orb--pink"></div>
        <div class="neon-orb neon-orb--cyan"></div>
        <div class="neon-grid"></div>

        <app-dashboard-header [totalEnquiries]="totalEnquiries"></app-dashboard-header>

        <div class="grid gap-4 sm:grid-cols-2 xl:grid-cols-4 dashboard-stats">
            <app-stats-card label="All Enquiries" [value]="totalEnquiries" colorClass="text-white"></app-stats-card>
            <app-stats-card label="Converted" [value]="convertedCount" colorClass="text-emerald-300"></app-stats-card>
            <app-stats-card label="Pending Follow-Up" [value]="pendingFollowUpCount"
                colorClass="text-amber-300"></app-stats-card>
            <app-stats-card label="Today Enquiries" [value]="todayEnquiriesCount"
                colorClass="text-cyan-300"></app-stats-card>
        </div>

        <div class="grid gap-6 lg:grid-cols-2">
            <div >
               <app-status-summary [statusSummary]="statusSummary"></app-status-summary>
            </div>

            <div >
               <app-category-summary [categorySummary]="categorySummary"></app-category-summary>
            </div>
        </div>

        <div class="dashboard-panel">
            <h2 class="panel-title">Recent Enquiries</h2>

            @if (recentEnquiries.length === 0) {
            <p class="empty-state">No enquiries available yet.</p>
            } @else {
            <div class="overflow-x-auto">
                <table class="min-w-full dashboard-table text-left text-sm">
                    <thead class="text-xs uppercase tracking-[0.18em] text-cyan-200/80">
                        <tr>
                            <th class="px-3 py-2">Customer</th>
                            <th class="px-3 py-2">Type</th>
                            <th class="px-3 py-2">Date</th>
                            <th class="px-3 py-2">Follow-Up</th>
                            <th class="px-3 py-2">Converted</th>
                        </tr>
                    </thead>
                    <tbody class="text-slate-200">
                        @for (enquiry of recentEnquiries; track enquiry.id) {
                        <tr>
                            <td class="px-3 py-2">
                                <p class="font-medium text-white">{{ enquiry.customerName }}</p>
                                <p class="text-xs text-slate-300/70">{{ enquiry.customerEmail }}</p>
                            </td>
                            <td class="px-3 py-2">{{ enquiry.enquiryType }}</td>
                            <td class="px-3 py-2">{{ enquiry.enquiryDate | date: 'dd MMM yyyy' }}</td>
                            <td class="px-3 py-2">{{ enquiry.followUpDate | date: 'dd MMM yyyy' }}</td>
                            <td class="px-3 py-2">
                                <span class="rounded-full px-2.5 py-1 text-xs font-semibold border"
                                    [class.bg-emerald-500/20]="enquiry.isConverted"
                                    [class.text-emerald-300]="enquiry.isConverted"
                                    [class.border-emerald-400/50]="enquiry.isConverted"
                                    [class.bg-amber-500/20]="!enquiry.isConverted"
                                    [class.text-amber-300]="!enquiry.isConverted"
                                    [class.border-amber-400/50]="!enquiry.isConverted">
                                    {{ enquiry.isConverted ? 'Yes' : 'No' }}
                                </span>
                            </td>
                        </tr>
                        }
                    </tbody>
                </table>
            </div>
            }
        </div>
    </div>
</section>